@page "/ClientDetailsView/{id}"
@using SEN381_UI.BusinessLayer
@using SEN381_UI.Data
@using SEN381_UI.Shared.MockData

<MudCard style="max-height:1000px; overflow: auto;">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h5" Align="Align.Center">Clients Detailed view</MudText>
        </CardHeaderContent>
        <CardHeaderAvatar>
            <MudIconButton Icon="@Icons.Filled.ArrowBack" Variant="Variant.Filled" Color="Color.Primary" aria-label="back" Style="margin-bottom:1%" Href="/ClientListView">Back</MudIconButton>
        </CardHeaderAvatar>
    </MudCardHeader>
    <MudForm Class="p-5">
        <MudGrid>

            @*Medical Condition Basic Details*@
            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client ID" ReadOnly="true" Text="@id"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Name" @bind-status=@name Text="@name"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Surname" @bind-status=@surname Text="@surname"></MudTextField>
            </MudItem>
            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Address" @bind-status=@address Text="@address"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Email" @bind-status=@email Text="@email"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Phone number" @bind-status=@phonenumber Text="@phonenumber"></MudTextField>
            </MudItem>
            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Polisies" @bind-status=@policies Text="policies"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client status" @bind-status=@status Text="@status"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Notes" @bind-status=@notes Text="@notes"></MudTextField>
            </MudItem>

            @*Treatment Details *@
            <MudItem lg="12" sm="6">
                <MudExpansionPanel class="h-25" Text="List of Policies">

                    <MudExpansionPanels style="max-height:400px; overflow: auto;" class="accordion-body">
                        @foreach (Policy policy in policies)
                        {
                            string text = $"Policy ID: {@policy.PolicyId}";
                            <MudExpansionPanel Text="@text">
                                <MudText> Policy Name: @policy.PolicyName </MudText>
                                <MudText> Policy STATUS: @policy.PolicyStatus </MudText>
                            </MudExpansionPanel>

                        }
                    </MudExpansionPanels>
                </MudExpansionPanel>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudButton>Cancel Changes</MudButton>
            </MudItem>
            <MudItem xs="6" sm="6">
                <MudButton >Save Changes</MudButton>
            </MudItem>

        </MudGrid>
    </MudForm>

</MudCard>


@code {

    [Parameter]
    public string? id { get; set; }

    private string name = "Jandre";
    private string surname = "Kruger";
    private string address = "27 Sonneveld street Brakpan";

    private string email = "JandreKruger@gmail.com";
    private string phonenumber = "0123456789";
    private string polocies = "1"; 
    private string status = "Approved";
    private string notes = "notes";


    List<Policy> policies = new PolicyMock().getMockPolicies();

}

