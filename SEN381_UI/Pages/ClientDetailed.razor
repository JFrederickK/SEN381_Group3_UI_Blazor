@using SEN381_UI.Data
@using SEN381_UI.Shared.MockData
@page "/ClientDetails/{id}"

<MudCard style="max-height:1000px; overflow: auto;">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h5" Align="Align.Center">Medical Condition Details</MudText>
        </CardHeaderContent>
        <CardHeaderAvatar>
            <MudIconButton Icon="@Icons.Filled.KeyboardBackspace"></MudIconButton>
        </CardHeaderAvatar>
    </MudCardHeader>
    <MudForm Class="p-5">
        <MudGrid>

            @*Medical Condition Basic Details*@
            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client ID" ReadOnly="true" Text="@id"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Name" @bind-status=name Text="@name"></MudTextField>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudTextField T="string" Label="Client Surname" @bind-status=name Text="@name"></MudTextField>
            </MudItem>

            @*Treatment Details *@
            <MudItem lg="12" sm="6">
                <MudExpansionPanel class="h-25" Text="List of Policies">

                    <MudExpansionPanels style="max-height:400px; overflow: auto;" class="accordion-body">
                        @foreach (Policy policy in policies)
                        {
                            string text = $"Policy ID: {@policy.PolicyId}";
                            <MudExpansionPanel Text="@text">
                                <MudText> Policy Name: @policy.PolicyName </MudText>
                                <MudText> Policy STATUS: @policy.PolicyStatus </MudText>
                            </MudExpansionPanel>

                        }
                    </MudExpansionPanels>
                </MudExpansionPanel>
            </MudItem>

            <MudItem xs="6" sm="6">
                <MudButton>Cancel Changes</MudButton>
            </MudItem>
            <MudItem xs="6" sm="6">
                <MudButton>Save Changes</MudButton>
            </MudItem>

        </MudGrid>
    </MudForm>

</MudCard>


@code {

    [Parameter]
    public string? id { get; set; }
    string name = "dasd";//Get from service

    List<Policy> policies = new PolicyMock().getMockPolicies();
}

